define ("plagiarism_turnitinsim/cv_launch",["jquery","core/str"],function(a,b){return{openCv:function openCv(){a(document).on("click",".or_score",function(){var c=a(this).parent().attr("class").split(/\s+/),d=0;a(c).each(function(a){if(c[a].match("^submission_")){d=c[a].split("_")[1]}});var e=window.open(),f="<div class=\"tii_dv_loading\" style=\"text-align:center;\">",g=M.cfg.wwwroot+"/plagiarism/turnitinsim/pix/tiiIcon.svg";f+="<img src=\""+g+"\" style=\"width:100px; height: 100px\">";b.get_string("loadingcv","plagiarism_turnitinsim").done(function(b){f+="<p style=\"font-family: Arial, Helvetica, sans-serif;\">"+b+"</p>";a(".eulacontainer").hide().html(b).fadeIn()});f+="</div>";a(e.document.body).html(f);a.ajax({type:"GET",url:M.cfg.wwwroot+"/plagiarism/turnitinsim/ajax/cv.php",dataType:"json",data:{action:"request_cv_launch",submissionid:d,sesskey:M.cfg.sesskey},success:function success(a){e.location=a.viewer_url;this.checkDVClosed(e)},checkDVClosed:function checkDVClosed(a){var b=this;if(a.closed){window.location=window.location}else{setTimeout(function(){b.checkDVClosed(a)},500)}}})})}}});
//# sourceMappingURL=cv_launch.min.js.map
