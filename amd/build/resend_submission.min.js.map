{"version":3,"sources":["../src/resend_submission.js"],"names":["define","$","str","resendSubmission","document","on","hide","siblings","removeClass","that","classList","attr","split","submissionid","each","index","match","ajax","type","url","M","cfg","wwwroot","dataType","data","action","sesskey","success","html","get_string","addClass","error","show"],"mappings":"AA4BAA,OAAM,4CAAC,CAAC,QAAD,CAAW,UAAX,CAAD,CAAyB,SAASC,CAAT,CAAYC,CAAZ,CAAiB,CAC5C,MAAO,CACHC,gBAAgB,CAAE,2BAAW,CACzBF,CAAC,CAACG,QAAD,CAAD,CAAYC,EAAZ,CAAe,OAAf,CAAwB,mBAAxB,CAA6C,UAAW,CACpDJ,CAAC,CAAC,IAAD,CAAD,CAAQK,IAAR,GACAL,CAAC,CAAC,IAAD,CAAD,CAAQM,QAAR,CAAiB,kBAAjB,EAAqCC,WAArC,CAAiD,QAAjD,EAFoD,GAGhDC,CAAAA,CAAI,CAAGR,CAAC,CAAC,IAAD,CAHwC,CAMhDS,CAAS,CAAGT,CAAC,CAAC,IAAD,CAAD,CAAQU,IAAR,CAAa,OAAb,EAAsBC,KAAtB,CAA4B,KAA5B,CANoC,CAOhDC,CAAY,CAAG,CAPiC,CAQpDZ,CAAC,CAACS,CAAD,CAAD,CAAaI,IAAb,CAAkB,SAASC,CAAT,CAAgB,CAC9B,GAAIL,CAAS,CAACK,CAAD,CAAT,CAAiBC,KAAjB,CAAuB,kBAAvB,CAAJ,CAAgD,CAC5CH,CAAY,CAAGH,CAAS,CAACK,CAAD,CAAT,CAAiBH,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,CAClB,CACJ,CAJD,EAMAX,CAAC,CAACgB,IAAF,CAAO,CACHC,IAAI,CAAE,MADH,CAEHC,GAAG,CAAEC,CAAC,CAACC,GAAF,CAAMC,OAAN,CAAgB,oDAFlB,CAGHC,QAAQ,CAAE,MAHP,CAIHC,IAAI,CAAE,CAACC,MAAM,CAAE,gBAAT,CAA2BZ,YAAY,CAAEA,CAAzC,CAAuDa,OAAO,CAAEN,CAAC,CAACC,GAAF,CAAMK,OAAtE,CAJH,CAKHC,OAAO,CAAE,kBAAW,CAChBlB,CAAI,CAACF,QAAL,CAAc,qBAAd,EAAqCC,WAArC,CAAiD,QAAjD,EACAC,CAAI,CAACF,QAAL,CAAc,kBAAd,EAAkCqB,IAAlC,CACI1B,CAAG,CAAC2B,UAAJ,CAAe,+BAAf,CAAgD,wBAAhD,CADJ,EAEApB,CAAI,CAACF,QAAL,CAAc,kBAAd,EAAkCuB,QAAlC,CAA2C,QAA3C,CACH,CAVE,CAWHC,KAAK,CAAE,gBAAW,CACdtB,CAAI,CAACuB,IAAL,GACAvB,CAAI,CAACF,QAAL,CAAc,kBAAd,EAAkCuB,QAAlC,CAA2C,QAA3C,CACH,CAdE,CAAP,CAgBH,CA9BD,CA+BH,CAjCE,CAmCV,CApCK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for Requeueing submissions.\n *\n * @package   plagiarism_turnitinsim\n * @copyright 2018 Turnitin\n * @author    David Winn <dwinn@turnitin.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module plagiarism_turnitinsim/resendSubmission\n */\n\ndefine(['jquery', 'core/str'], function($, str) {\n    return {\n        resendSubmission: function() {\n            $(document).on('click', '.pp_resubmit_link', function() {\n                $(this).hide();\n                $(this).siblings('.pp_resubmitting').removeClass('hidden');\n                var that = $(this);\n\n                // Moodle forums strip ids from elements so we have to use classes.\n                var classList = $(this).attr('class').split(/\\s+/);\n                var submissionid = 0;\n                $(classList).each(function(index) {\n                    if (classList[index].match(\"^pp_resubmit_id_\")) {\n                        submissionid = classList[index].split(\"_\")[3];\n                    }\n                });\n\n                $.ajax({\n                    type: \"POST\",\n                    url: M.cfg.wwwroot + \"/plagiarism/turnitinsim/ajax/resend_submission.php\",\n                    dataType: \"text\",\n                    data: {action: \"resubmit_event\", submissionid: submissionid, sesskey: M.cfg.sesskey},\n                    success: function() {\n                        that.siblings('.turnitinsim_status').removeClass('hidden');\n                        that.siblings('.tii_status_text').html(\n                            str.get_string('submissiondisplaystatusqueued', 'plagiarism_turnitinsim'));\n                        that.siblings('.pp_resubmitting').addClass('hidden');\n                    },\n                    error: function() {\n                        that.show();\n                        that.siblings('.pp_resubmitting').addClass('hidden');\n                    }\n                });\n            });\n        }\n    };\n});"],"file":"resend_submission.min.js"}